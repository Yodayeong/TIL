## 이미지 업로드 (기본 설정)



- pillow 설치

  => Python Image Library (이미지 관리)

  ```bash
  pip install Pillow
  pip freeze > requirements.txt
  ```

- model을 정의할 때, ImageField 설정

  ```python
  #articles/models.py
  class Article(models.Model):
      title = models.CharField(max_length=20)
      content = models.TextField()
      created_at = models.DateTimeField(auto_now_add=True)
      updated_at = models.DateTimeField(auto_now=True)
      #ImageField 설정
      image = models.ImageField(upload_to='images/', blank=True)
  ```

- model을 migrate 해주기

  ```bash
  python manage.py makemigrations
  python manage.py migrate
  ```

- model form 만들기

  ```python
  #aricles/forms.py
  from django import forms
  from .models import Article
  
  class ArticleForm(forms.ModelForm):
      
      class Meta:
          model = Article
          fields = ['title', 'content', 'image']
  ```

- create.html 생성

  ```html
  <!-- articles/create.html -->
  
  {% extends 'base.html' %}
  
  {% block content %}
  
  <!-- 사진 객체를 넘겨줄 때는 enctype을 설정해줘야함 -->
  <form action="" method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      <!-- 넘겨받은 form을 p형태로 출력 -->
      {{ form.as_p }}
      <input type="submit" value="제출하기">
  </form>
  
  {% endblock %}
  ```

- views.py 수정

  ```python
  #articles/views.py
  
  from django.shortcuts import render
  from .forms import ArticleForm
  
  # Create your views here.
  def index(request):
      return render(request, 'articles/index.html')
  
  def create(request):
      if request.method == 'POST':
          #요청이 들어온 파일들도 request.FILES로 보내줘야함
          form = ArticleForm(request.POST, request.FILES)
          if form.is_valid():
              form.save()
              return render(request, 'articles/index.html')
      else:
          form = ArticleForm()
      context = {
          'form': form
      }
  
      return render(request, 'articles/create.html', context)
  ```

  