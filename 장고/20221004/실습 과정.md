### 1. 가상환경 생성 및 실행

```bash
python -m venv myvenv
source myvenv/Scripts/activate
```

### 2. Django 설치 및 기록

```bash
pip install django==3.2.13
pip freeze > requirements.txt
```

### 3. Django 프로젝트 생성

```bash
django-admin startproject pjt .
```

### 4. articles app 생성

```bash
python manage.py startapp articles

#pjt/settings.py
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'articles', #articles 앱 등록
]
```

### 5. articles url 따로 분리

```python
#pjt/urls.py
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    #articles의 url을 include해줌
    path('articles/', include('articles.urls'))
]


#articles/urls.py
from django.urls import path

app_name = 'articles'

urlpatterns = [
    
]
```

### 6. url등록, view 함수 생성, template 생성

```python
#articles/urls.py
from django.urls import path
from . import views #views import 해주기

app_name = 'articles'

urlpatterns = [
    #홈 화면 경로에서는 index 함수를 부르기
    path('', views.index, name="index")
]


#articles/views.py
def index(request): #요청을 받아서
    return render(request, 'articles/index.html') #render


#articles/templates/articles/index.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    안녕!
</body>
</html>
```

### 7. 모델 설계

```python
#articles/models.py
'''
게시판 기능
- 제목(20글자 이내)
- 내용(긴 글)
- 글 작성시간/수정시간(자동으로 기록, 날짜/시간)
'''

class Articles(models.Model):
    title = models.CharField(max_length=20)
    content = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    

#bash
python manage.py makemigrations
python manage.py migrate
```

### 8. CRUD 기능 구현

- 요청 받는 페이지 생성

  ```python
  #articles/urls.py
  from django.urls import path
  from . import views
  
  app_name = 'articles'
  
  urlpatterns = [
      path('', views.index, name="index"),
      #new 생성
      path('new', views.new, name="new"),
  ]
  
  
  #articles/views.py
  def new(request):
      return render(request, 'articles/new.html')
  ```

  ```html
  <!--articles/new.html-->
  
  <!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
  </head>
  <body>
      <h1>글쓰기</h1>
      <form action="{% url 'articles:create' %}">
          <label for="title">제목 : </label>
          <input type="text" name="title" id="title">
          <label for="content">재용 : </label>
          <textarea name="content" id="content" cols="30" rows="10"></textarea>
          <input type="submit" value="글쓰기">
      </form>
  </body>
  </html>
  ```

  ```python
  #articles/urls.py
  
  urlpatterns = [
      path('', views.index, name="index"),
      path('new', views.new, name="new"),
      #create 생성
      path('create', views.create, name="create")
  ]
  
  
  #articles/views.py
  
  from django.shortcuts import render, redirect
  from .models import Articles
  
  def create(request):
      title = request.GET.get('title')
      content = request.GET.get('content')
      Articles.objects.create(title=title, content=content)
  
      return redirect('articles:index')
  ```

  ```html
  <!--articles/index.html-->
  
  <!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
  </head>
  <body>
      안녕!
  
      <!--글쓰기를 articles:new로 연결-->
      <a href="{% url 'articles:new' %}">글쓰기</a>
  </body>
  </html>
  ```

  ```python
  #articles/views.py
  
  def index(request):
      #articles의 객체를 역순으로 가져오기
      articles = Articles.objects.order_by('-pk')
      context = {
          'articles': articles
      }
  
      return render(request, 'articles/index.html', context)
  ```

  ```html
  <!--articles/index.html-->
  
  <!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
  </head>
  <body>
      안녕!
  
      <a href="{% url 'articles:new' %}">글쓰기</a>
  
      <!--객체들을 돌아가며 출력-->
      {% for article in articles %}
          <h3>{{ article.title }}</h3>
          <p>{{ article.created_at }} | {{ article.updated_at }}</p>
          <hr>
      {% endfor %}
  </body>
  </html>
  ```

- post 방식으로 변경

  ```html
  <!--articles/new.html-->
  
  <!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
  </head>
  <body>
      <h1>글쓰기</h1>
      <!--POST 방식-->
      <form action="{% url 'articles:create' %}" method="POST">
          <!--csrf_token-->
          {% csrf_token %}
          <label for="title">제목 : </label>
          <!--required로 필수입력 받도록-->
          <input type="text" name="title" id="title" required>
          <label for="content">재용 : </label>
          <textarea name="content" id="content" cols="30" rows="10" required></textarea>
          <input type="submit" value="글쓰기">
      </form>
  </body>
  </html>
  ```

  ```python
  def create(request):
      #POST 방식을 받아줌
      title = request.POST.get('title')
      content = request.POST.get('content')
      Articles.objects.create(title=title, content=content)
  
      return redirect('articles:index')
  ```

- model form 을 그대로 가져오고 싶음

  ```python
  #articles/forms.py
  
  from django import forms
  from .models import Articles
  
  class ArticleForm(forms.ModelForm):
      
      class Meta:
          model = Articles
          fields = '__all__'
  ```

  ```python
  #articles/views.py
  
  from .forms import ArticleForm
  
  def new(request):
      article_form  = ArticleForm()
      context = {
          'article_form': article_form
      }
  
      return render(request, 'articles/new.html', context=context)
  ```

  ```html
  <!--articles/new.html-->
  
  <!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
  </head>
  <body>
      <h1>글쓰기</h1>
      <form action="{% url 'articles:create' %}" method="POST">
          {% csrf_token %}
          <!--article_form 가져오기-->
          {{ article_form.as_p }}
          <input type="submit" value="글쓰기">
      </form>
  </body>
  </html>
  ```

- 유효성 검사도 해주기

  ```python
  def create(request):
      article_form = ArticleForm(request.POST)
      #유효하다면,
      if article_form.is_valid():
          article_form.save()
          return redirect('articles:index')
      #유효하지 않다면,
      else:
          context = {
              'article_form': article_form
          }
      return render(request, 'articles/new.html', context=context)
  ```

- 상세 페이지

  ```python
  #articles/urls.py
  
  urlpatterns = [
      path('', views.index, name="index"),
      path('new', views.new, name="new"),
      path('create', views.create, name="create"),
      #각 pk값마다 detail 연결
      path('<int:pk>/', views.detail, name="detail")
  ]
  ```

  ```python
  #articles/views.py
  
  def detail(request, pk):
      article = Articles.objects.get(pk=pk)
      context = {
          'article': article
      }
  
      return render(request, 'articles/detail.html', context)
  ```

  ```html
  <!--articles/detail.html-->
  
  <!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
  </head>
  <body>
      <h1>{{ article.pk }}번 게시글</h1>
      <h2>{{ article.created_at }} | {{ article.updated_at }}</h2>
      <p>{{ article.content }}</p>
  </body>
  </html>
  ```

  ```html
  <!--articles/index.html-->
  
  <!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
  </head>
  <body>
      안녕!
  
      <a href="{% url 'articles:new' %}">글쓰기</a>
  
      {% for article in articles %}
      	<!--detail page로 링크 연결-->
          <h3><a href="{% url 'articles:detail' article.pk %}">{{ article.title }}</a></h3>
          <p>{{ article.created_at }} | {{ article.updated_at }}</p>
          <hr>
      {% endfor %}
  </body>
  </html>
  ```

- update 만들기

  ```python
  #articles/urls.py
  
  urlpatterns = [
      path('', views.index, name="index"),
      path('new', views.new, name="new"),
      path('create', views.create, name="create"),
      path('<int:pk>/', views.detail, name="detail"),
      #update 경로 설정
      path('<int:pk>/update/', views.update, name="update"),
  ]
  ```

  ```python
  #articles/views.py
  
  def update(request, pk):
      #원래 있던 값도 불러오기
      article = Articles.objects.get(pk=pk)
      article_form = ArticleForm(instance=article)
      context = {
          'article_form': article_form
      }
  
      return render(request, 'articles/update.html', context)
  ```

  ```html
  <!--articles/detail.html-->
  
  <!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
  </head>
  <body>
      <h1>{{ article.pk }}번 게시글</h1>
      <h2>{{ article.created_at }} | {{ article.updated_at }}</h2>
      <p>{{ article.content }}</p>
      <!--pk값에 해당하는 update 페이지 연결-->
      <a href="{% url 'articles:update' article.pk%}">수정하기</a>
  </body>
  </html>
  ```

  ```html
  <!--articles/update.html-->
  
  <!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
  </head>
  <body>
      <h1>글 수정하기</h1>
  
      <form action="" method="POST">
          {% csrf_token %}
          {{ article_form.as_p }}
          <input type="submit", value="수정하기">
      </form>
  </body>
  </html>
  ```

  ```python
  #articles/views.py
  
  #update 함수 수정
  def update(request, pk):
      article = Articles.objects.get(pk=pk)
      if request.method == 'POST':
          article_form = ArticleForm(request.POST, instance=article)
          if article_form.is_valid():
              article_form.save()
              return redirect('articles:detail', article.pk)
      else:
          article_form = ArticleForm(instance=article)
      article_form = ArticleForm(instance=article)
      context = {
          'article_form': article_form
      }
      return render(request, 'articles/update.html', context)
  ```

  