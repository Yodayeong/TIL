## 데이터베이스

- 체계화된 데이터의 모임

- 여러 사람이 공유하고 사용할 목적으로 통합 관리되는 정보의 집합

- 몇 개의 자료 파일을 조직적으로 통합하여,

  - 자료 항목의 중복을 없애고
  - 자료를 구조화하여 기억시켜 놓은

  자료의 집합체

  

## 관계형 데이터베이스

- 서로 관련된 데이터를 저장하고 접근할 수 있는 데이터베이스 유형
- 키(key)와 값(value)들의 간단한 관계(realation)를 표(table) 형태로 정리한 데이터베이스



### 스키마

- 데이터베이스에서 자료의 구조, 표현방법, 관계 등 전반적인 명세를 기술한 것



### 테이블

- 열(컬럼/필드)과 행(레코드/값)의 모델을 사용해 조직된 데이터 요소들의 집합
  - 열 : 각 열에 고유한 데이터 형식 지정
  - 행 : 실제 데이터가 저장되는 형태
  - 기본키(primary key) : 각 행(레코드)의 고유 값



## RDBMS(관계형 데이터베이스 관리 시스템)



### SQLite

- 서버 형태가 아닌 파일 형식으로 응용 프로그램에서 넣어서 사용하는 비교적 가벼운 데이터베이스
- 구글 안드로이드 운영체제에 기본적으로 탑재된 데이터베이스이며, 임베디드 소프트웨어에도 많이 활용됨
- 로컬에서 간단한 DB 구성을 할 수 있으며, 오픈소스 프로젝트이기 때문에 자유롭게 사용 가능



## SQL(Structured Query Language)

- 관계형 데이터베이스 관리시스템의 데이터 관리를 위해 설계된 특수 목적의 프로그래밍 언어
- 데이터베이스 스키마 생성 및 수정
- 자료의 검색 및 관리
- 데이터베이스 객체 접근 조정 관리

| 분류                  | 개념                                                         | 예시                            |
| --------------------- | ------------------------------------------------------------ | ------------------------------- |
| DDL(데이터 정의 언어) | 관계형 데이터베이스 구조(테이블, 스키마)를 정의하기 위한 명령어 | CREATE, DROP, ALTER             |
| DML(데이터 조작 언어) | 데이터를 저장, 조회, 수정, 삭제 등을 하기 위한 명령어        | INSERT, SELECT, UPDATE, DELETE  |
| DCL(데이터 제어 언어) | 데이터베이스 사용자의 권한 제어를 위해 사용하는 명령어       | GRANT, REVOKE, COMMIT, ROLLBACK |





## 테이블 생성

```bash
[terminal]

sqlite3 tutorial.sqlite3

.database

.import hellodb.csv examples

SELECT * FROM examples;

.headers on
.mode colum
SELECT * FROM examples

```

```bash
CREATE TABLE classmates(
	id INTEGER PRIMARY KEY,
	name TEXT
);

[terminal]

.tables
#테이블 목록 조회
#classmates examples

.schema classmates
#특정 테이블 스키마 조회
#CREATE TABLE classmates(
#	id INTEGER PRIMARY KEY,
#	name TEXT
#);

INSERT INTO classmates VALUES(1, '조세호');
#값 추가

[terminal]

SELECT * FROM classmates;

DROP TABLE classmates;
#테이블 삭제
```



[새로운 테이블 생성]

```bash
-- classmates
-- name : TEXT
-- age : INT
-- address : TEXT

CREATE TABLE classmates(
	name TEXT,
	age INT,
	address TEXT
);

[terminal]
.schema classmates
```



[아래 테이블의 의미를 확인해보세요.]

```bash
CREATE TABLE students(
	id INTEGER PRIMARY KEY,
	#id는 숫자 이면서, pk 유일한 값으로 쓰겠다.
	name TEXT NOT NULL,
	#name은 text 타입인데, 공백인 것을 허용하지 않겠다.
	age INTEGER DEFAULT 1 CHECK(0 < age)
	#age는 숫자이고, default값은 1, age가 반드시 0보다 큰 것을 체크
);
```



## CRUD



### Create

- Insert 

  - 테이블에 단일 행 삽입

    ```bash
    INSERT INTO 테이블_이름 (컬럼1, 컬럼2) VALUES (값1, 값2)
    ```

  - 테이블에 정의된 모든 컬럼에 맞춰 순서대로 입력

    ```bash
    INSERT INTO 테이블_이름 VALUES (값1, 값2, 값3);
    ```

  - classmates 테이블에 이름이 홍길동이고 나이가 23인 데이터를 넣어봅시다. SELECT문을 통해 확인해보세요.

    ```bash
    INSERT INTO classmates (name, age) VALUES ('홍길동', 23)
    
    [terminal]
    SELECT * FROM classmates
    ```

  - classmates 테이블에 이름이 홍길동이고, 나이가 30이고, 주소가 서울인 데이터를 넣어봅시다. SELECT문을 통해 확인해보세요.

    ```bash
    INSERT INTO classmates VALUES ('홍길동', 30, '서울')
    
    [terminal]
    SELECT * FROM classmate
    ```

  - INSERT 직접 해보기

    ```bash
    CREATE TABLE classmates(
    	name TEXT NOT NULL,
    	age INT NOT NULL,
    	address TEXT NOT NULL
    );
    
    INSERT INTO classmates VALUES
    ('홍길동', 30, '서울'),
    ('김철수', 30, '제주'),
    ('이호영', 26, '인천'),
    ('박민희', 29, '대구'),
    ('최혜영', 28, '전주')
    ```

    

### Read

- Select

  - 테이블에서 데이터를 조회

  - LIMIT

    - 쿼리에서 반환되는 행 수를 제한

  - WHERE

    - 쿼리에서 반환되는 행에 대한 특정 검색 조건을 지정

  - SELECT DISTINCT

    - 조회 결과에서 중복 행을 제거

  - classmates 테이블에서 id, name 컬럼 값만 조회하세요.

    ```bash
    SELECT id, name FROM classmates;
    
    SELECT id, name FROM classmates LIMIT 1;
    #하나의 행만을 조회
    
    SELECT id, name FROM classmates OFFSET 2;
    #2칸을 띄우고 그 다음 값을 조회
    # => 세번째 행을 조회
    #OFFSET:처음부터 주어진 요소나 지점까지의 차이를 나타내는 정수형
    ```

  - classmates 테이블에서 id, name 칼럼 값 중에 주소가 서울인 경우의 데이터를 조회하세요.

    ```bash
    SELECT * FROM classmates WHERE address='서울';
    
    #나이가 30 이상
    SELECT * FROM classmates WHERE age >= 30;
    ```

  - 특정 칼럼에 해당하는 값들만 보여주기

    ```bash
    SELECT DISTINCT age FROM classmates;
    #classmates에서 나이들만 출력
    
    SELECT DISTINCT address FROM classmates;
    #classmates에서 주소들만 출력
    ```

  - 특정한 레코드만 지우기
  
    ```bash
    DELETE FROM classmates WHERE rowid=5;
    ```



### Update

- update

  - ```bash
    UPDATE classmates SET address='서울' WHERE rowid=5;
    SELECT rowid, * FROM classmates;
    ```